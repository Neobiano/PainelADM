
<!DOCTYPE html>
<html lang="pt">
	<head>
		<meta charset="UTF-8" >		
      	<title>PainelCERAT</title>		
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/bower_components/font-awesome/css/font-awesome.min.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/bower_components/Ionicons/css/ionicons.min.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/bower_components/select2/dist/css/select2.min.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/dist/css/AdminLTE.min.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/dist/css/skins/skin-blue.min.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/bower_components/bootstrap/dist/css/bootstrap.min.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/dist/css/skins/_all-skins.min.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/plugins/iCheck/square/blue.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css");</style>
		<link rel="stylesheet" type="text/css" href="http://127.0.0.1/PainelADM/css/style.css" media="screen" />
		<script type="text/javascript" src="http://127.0.0.1/PainelADM/js/geral.js"></script>
		<script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
		<script type="text/javascript" src="bower_components/fastclick/lib/fastclick.js"></script>

		<style type="text/css">@import url("http://127.0.0.1/PainelADM/Lib/css/dx.spa.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/Lib/css/dx.common.css");</style>
		<style type="text/css">@import url("http://127.0.0.1/PainelADM/Lib/css/dx.light.css");</style>
		<script type="text/javascript" src="Lib/js/jszip.min.js"></script>
		<script type="text/javascript" src="Lib/js/dx.all.js"></script>
           

		<style>
        		.dx-datagrid-headers {
        				color: #ffffff !important;
        				background-color: #003666 !important;
        			}
        								
        		  .clshite{  background-color:White;  }  .clse94343{  background-color:#e94343;  }  .clsde4294{  background-color:#de4294;  }  .cls66c72d{  background-color:#66c72d;  }  .cls4f857b{  background-color:#4f857b;  }  .clsc25858{  background-color:#c25858;  }  .cls473bc2{  background-color:#473bc2;  }  .cls798a31{  background-color:#798a31;  }  .cls37e1d6{  background-color:#37e1d6;  }  .clsae35a8{  background-color:#ae35a8;  }  .clse3c4c4{  background-color:#e3c4c4;  }  .cls{  background-color:;  }  .cls3adca3{  background-color:#3adca3;  }  .clsebe422{  background-color:#ebe422;  }             
		</style>
		
	</head> 
		
	<body class="hold-transition skin-blue sidebar-mini">
	
		<div class="wrapper">
			<header class="main-header">
				 <!-- Logo -->
			    <a href="painel.php" class="logo 	">
			      <!-- mini logo for sidebar mini 50x50 pixels -->
			      <span class="logo-mini"><b>P</b>CT</span>
			      <!-- logo for regular state and mobile devices -->
			      <span class="logo-lg"><b>Painel</b>CERAT</span>
			    </a>
			    
			    <!-- Header Navbar -->
			    <nav class="navbar navbar-static-top" role="navigation">
			      <!-- Sidebar toggle button-->
			      <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
			        <span class="sr-only">Toggle navigation</span>
			      </a>
			      <!-- Navbar Right Menu -->
			      <div class="navbar-custom-menu">
			        <ul class="nav navbar-nav">
			          <!-- Messages: style can be found in dropdown.less-->
			          <li class="dropdown messages-menu">
			            <!-- Menu toggle button -->
			            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
			              <i class="fa fa-envelope-o"></i>
			              <span class="label label-success">4</span>
			            </a>
			            <ul class="dropdown-menu">
			              <li class="header">Você tem 4 mensagens</li>
			              <li>
			                <!-- inner menu: contains the messages -->
			                <ul class="menu">
			                  <li><!-- start message -->
			                    <a href="#">
			                      <div class="pull-left">
			                        <!-- User Image -->			                                              
			                        <img src="images/4-Usuario.png" class="img-circle" alt="User Image"/>			                        <<!-- <img src="images/Fabiano.png" class="img-circle" alt="User Image"> -->
			                      </div>
			                      <!-- Message title and timestamp -->
			                      <h4>
			                        Equipe de Produção
			                        <small><i class="fa fa-clock-o"></i> 5 minutos</small>
			                      </h4>
			                      <!-- The message -->
			                      <p>Avaliar resposta a CEDES</p>
			                    </a>
			                  </li>
			                  <!-- end message -->
			                </ul>
			                <!-- /.menu -->
			              </li>
			              <li class="footer"><a href="#">Visualizar todas as mensagens</a></li>
			            </ul>
			          </li>
			          <!-- /.messages-menu -->
			
			          <!-- Notifications Menu -->
			          <li class="dropdown notifications-menu">
			            <!-- Menu toggle button -->
			            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
			              <i class="fa fa-bell-o"></i>
			              <span class="label label-warning">10</span>
			            </a>
			            <ul class="dropdown-menu">
			              <li class="header">Você 10 notificações</li>
			              <li>
			                <!-- Inner Menu: contains the notifications -->
			                <ul class="menu">
			                  <li><!-- start notification -->
			                    <a href="#">
			                      <i class="fa fa-users text-aqua"></i> 5 novos usuários incluídos hoje
			                    </a>
			                  </li>
			                  <!-- end notification -->
			                </ul>
			              </li>
			              <li class="footer"><a href="#">Visualizar todos</a></li>
			            </ul>
			          </li>
			          <!-- Tasks Menu -->
			          <li class="dropdown tasks-menu">
			            <!-- Menu Toggle Button -->
			            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
			              <i class="fa fa-flag-o"></i>
			              <span class="label label-danger">9</span>
			            </a>
			            <ul class="dropdown-menu">
			              <li class="header">Vocês tem 9 tarefas</li>
			              <li>
			                <!-- Inner menu: contains the tasks -->
			                <ul class="menu">
			                  <li><!-- Task item -->
			                    <a href="#">
			                      <!-- Task title and progress text -->
			                      <h3>
			                        Configurar tela de fatura
			                        <small class="pull-right">20%</small>
			                      </h3>
			                      <!-- The progress bar -->
			                      <div class="progress xs">
			                        <!-- Change the css width attribute to simulate progress -->
			                        <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar"
			                             aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
			                          <span class="sr-only">20% Completo</span>
			                        </div>
			                      </div>
			                    </a>
			                  </li>
			                  <!-- end task item -->
			                </ul>
			              </li>
			              <li class="footer">
			                <a href="#">Visualizar todas as tarefas</a>
			              </li>
			            </ul>
			          </li>
			          <!-- User Account Menu -->
			          <li class="dropdown user user-menu">
			            <!-- Menu Toggle Button -->
			            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
			              <!-- The user image in the navbar-->
			              <img src="images/4-Usuario.png" class="user-image" alt="User Image"/>			              <!--<img src="images/Fabiano.png" class="user-image" alt="User Image">-->
			              <!-- hidden-xs hides the username on small devices so only the image appears. -->
			              <span class="hidden-xs">Fabiano Lisboa</span>
			            </a>
			            <ul class="dropdown-menu">
			              <!-- The user image in the menu -->
			              <li class="user-header">
			                <img src="images/4-Usuario.png" class="img-circle" alt="User Image"/>			                <!--<img src="images/Fabiano.png" class="img-circle" alt="User Image">-->
			
			                <p>
			                  Fabiano Lisboa			                  
			                  <small>Membro desde dezembro de 2017			                  </small>
			                </p>
			              </li>
			          
			              </li>
			              <!-- Menu Footer-->
			              <li class="user-footer">
			                <div class="pull-left">
			                  <a href="#" class="btn btn-default btn-flat">Dados Pessoais</a>
			                </div>
			                <div class="pull-right">
			                  <a href="?logoff=true" class="btn btn-default btn-flat">Sair</a>
			                </div>
			              </li>
			            </ul>
			          </li>
			          <!-- Control Sidebar Toggle Button, vou usar apenas como 'decorativo' para o perfil -->
			          <li>
			            <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
			          </li>
			        </ul>
			      </div>
			    </nav>
			</header><!-- header -->	
			
	<aside class="main-sidebar">

    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">

      <!-- Sidebar user panel (optional) -->
      <div class="user-panel">
        <div class="pull-left image">
          <img src="images/4-Usuario.png" class="img-circle" alt="User Image"/>       
          <<!-- <img src="images/Fabiano.png" class="img-circle" alt="User Image"> -->
        </div>
        <div class="pull-left info">
          <p>Fabiano Lisboa</p>
          <!-- Status -->
          <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <ul class="sidebar-menu" data-widget="tree">
        <li class="header">MENU</li>          
       	<li class="active"><a href="?m=tarefas&t=listar"><i class="fa fa-tasks"></i> <span>Demandas</span></a></li>                           
        <li class="treeview">
          <a href="#">
            <i class="fa fa-file-text""></i> <span>Cadastros</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li class="active"><a href="?m=tipos&t=listar"><i class="fa fa-edit"></i>Tipos</a></li>
            <li class="active"><a href="?m=status&t=listar"><i class="fa fa-ticket"></i>Status</a></li>
            <li class="active"><a href="?m=prioridades&t=listar"><i class="fa fa-calendar-check-o"></i>Prioridade</a></li>    
            <li class="active"><a href="?m=categorias&t=listar"><i class="fa fa-tag"></i>Categoria</a></li>
            <li class="active"><a href="?m=periodos_entrega&t=listar"><i class="fa fa-tag"></i>Períodos de Entrega</a></li>           
          </ul>
        </li>

       <li class="active"><a href="?m=projetos&t=listar"><i class="fa fa-product-hunt"></i> <span>Projetos</span></a></li>
       <li class="active"><a href="?m=usuarios&t=listar"><i class="fa fa-users"></i> <span>Usuários</span></a></li>
           
        <li class="treeview">
          <a href="#">
            <i class="fa fa-line-chart"></i> <span>Relatórios</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li class="active"><a href="invoice.html"><i class="fa fa-circle-o text-withe"></i>Demandas por Colaborador</a></li>
            <li class="active"><a href="invoice.html"><i class="fa fa-circle-o text-withe"></i>Demandas por Período</a></li>
            <li class="active"><a href="invoice.html"><i class="fa fa-circle-o text-withe"></i>Demandas Por Projeto</a></li>            
            <li class="active"><a href="invoice.html"><i class="fa fa-circle-o text-withe"></i>Pendência de Resposta</a></li>
          </ul>
        </li>
      </ul>
      <!-- /.sidebar-menu -->
    </section>
    <!-- /.sidebar -->
  </aside>	   
            
            <script type="text/javascript">
        		   function bindGrid(data) {
        		       $("#gridContainer").dxDataGrid({
        		            dataSource: data,
        		            columnChooser: 
        			            {
            		             enabled : true,
            		             mode: "select"
        		             	},
        		            stateStoring:{
        						enabled : true,
        						type: "localStorage",
        						storageKey: "storages"
        			            }, 	
        			            keyExpr: "id",
        			         pager: {
        				         	showPageSizeSelector : true,
        				         	allowedPageSizes: [5,10,20]
        				         },
        		            "export": { enabled: true, fileName: "Tarefas"},
        		            columns: [
        		            	{ dataField: "id", caption: "Código" },		                      
                               'assunto',
                               { dataField: "id_tipo", caption: "Cód. Tipo" },
                               { dataField: "id_status", caption: "Cód. Status" },
                               { dataField: "id_prioridade", caption: "Cód. Prioridade" },
                               
                               { dataField: "data_cad", caption: "Dt. Cadastro" },
                               { dataField: "id_projeto", caption: "Cód. Projeto" },
                               { dataField: "id_categoria", caption: "Cód. Categoria" },
                               { dataField: "data_inicio", caption: "Dt. Inicio" },
                               { dataField: "data_fim", caption: "Dt. Fim" },                       
                               { dataField: "id_atribuido", caption: "Cód. Usr. Atrib." },
                               { dataField: "id_criador", caption: "Cód. Usr. Criador" },
                               { dataField: "data_prev_fim", caption: "Dt. Prev. Fim" },
                               { dataField: "atraso", caption: "Atraso(dias)" },                       
                               'categoria',
                               'projeto',
                               'status',
                               'cor',
                               'cor_linha',
                               { dataField: "usr_criador", caption: "Usr. Criador" },
                               { dataField: "usr_criador", caption: "Usr. Atribuído" },                       
                               'tipo',    
        		                {
        		      			  dataField: "acoes",
        		      			  width: 100,
        		      			  dataType: "string",
        		      				cellTemplate: function(container, options) {
        		      		        var productName = options.value;
        		      		        $("<a href=\'?m=tarefas&t=incluir&id=" + options.value + "' title='Novo'><img src='images/add.png' alt='Novo cadastro' /></a>  <a href=\'?m=tarefas&t=editar&id=" + options.value + "' title='Editar'><img src='images/edit.png' alt='Editar'/></a> <a href=\'?m=tarefas&t=excluir&id=" + options.value + "'><img src='images/delete.png' alt='Excluir' /></a>")		      		       
        		      		        .appendTo(container);        		      		       
        		      		      }
        		      			},  		      			
        		            ],		            	
        		    		onCellPrepared: function (e) {
        		                if (e.rowType == 'data') {
        		                    if (e.column.dataField == 'status')  
        		                    {     
        		                    	var str = e.data.cor;		                    	      	
        		                    	e.cellElement.addClass("cls"+str.substr(1, 10));  
        		                      
        		                    }
        		    				else if (e.column.dataField == 'acoes')  
        		                    {                  
        		                      e.cellElement.addClass("clshite");  					
        		                    }
        		                }
        		            },  
        		    		onRowPrepared: function (info) {
        		    					if (info.rowType == 'data' )
        		    					{				    				
        			    				  var str = '';
        			    				  str = info.component.cellValue(info.rowIndex,"cor_linha");
        			    				  info.rowElement.addClass("cls"+str.substr(1, 10));			    					  			                      		    						
        		    					}
        		    				},  
        		            paging: {
        		                pageSize: 10
        		            },
        		            sorting: {
        		                mode: "multiple"
        		            },
        		            filterRow: {
        		                visible: false
        		            },
        		            searchPanel: {
        			            visible : true
        		            },		            
        		            showBorders : true,
        		            showColumnLines : true,
        		            showRowLines : true,
        		            allowColumnReordering: true,
        		            allowColumnResizing: true,
        		            columnResizingMode: "widget",
        		            groupPanel: {
        		                visible: true
        		            },
        		            selection: {
        		                mode: "single"
        		            },
        		            summary: {
        		            	groupItems: [{
        		                    column: "id",
        		                    summaryType: "count",
        		                    showInGroupFooter: true,
        		                }, 
        		                // ...
        		                ]
        		            }
        		        });
        		} 
        		$(document).ready(function () {
        		var hr = new XMLHttpRequest();
        		hr.open("GET", "modulos/dados_tarefas.php", true);
        		hr.setRequestHeader("Content-type", "application/json");
        		hr.onreadystatechange = function() {
        		    if (hr.readyState == 4 && hr.status == 200) {
        		        var data = JSON.parse(hr.responseText);
        		        bindGrid(data.tarefas);
        		    }
        		 }
        		 hr.send();      
        		});
        		
           </script>
            <div class="content-wrapper">             
                <!-- Content Header (Page header) -->
    		    <section class="content-header">
    		      <h1>
    		        Demandas
    		        <small>Listagem</small>
    		      </h1>
    		      <ol class="breadcrumb">
    		        <li><a ><i class="fa fa-dashboard"></i> tarefas</a></li>
    		        <li class="active">Listagem</li>
    		      </ol>
    		    </section>
    		    
    		     <!-- Main content -->
        		<section class="content container-fluid">                
                	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">		       
                	<div class="box">                              
                    	<div class="box-body">
                        	<div id="gridContainer"></div>
            			</div><!-- /.box -->                    
            		</div><!-- /.box-body -->
            	</section> <!-- /.Main content -->           
			</div> <!-- /.content-wrapper -->
            
	
    
        
  <!-- Main Footer -->  
  <footer class="main-footer">
    <!-- To the right -->
    <div class="pull-right hidden-xs">
      terça-feira, 19 de dezembro de 2017    </div>
    <!-- Default to the left -->
    <strong>Desenvolvido por CERAT-FO &copy; 2017 <a href="#"></a>.</strong> 
  </footer>
 
</div><!-- ./wrapper -->
	
   
	   
	<!-- Bootstrap 3.3.7 -->
	<script src="'"></script>
	<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<!-- DataTables -->
	<script src="bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
	<script src="bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
	<!-- SlimScroll -->
	<script src="bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<!-- FastClick -->
	<script src="bower_components/fastclick/lib/fastclick.js"></script>
	<!-- AdminLTE App -->
	<script src="dist/js/adminlte.min.js"></script>
	
	<script src="dist/js/demo.js"></script>
	<script src="bower_components/select2/dist/js/select2.full.min.js"></script>	
	<script src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>	         	   	
		
</body>
</html>